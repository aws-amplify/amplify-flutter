# ffigen config for libsecret
# 
# To regenerate, run: `dart run ffigen --config ffigen.libsecret.config.yaml`
# 
# The entry-points values assumes that libsecret & glib are in the same parent 
# dir as amplify-dart. Either clone libsecret & glib into the same dir, or update
# the file paths as needed.
# 
# libsecret source code: https://gitlab.gnome.org/GNOME/libsecret/ 
# glib source code: https://github.com/GNOME/glib

output: 'lib/src/ffi/libsecret/libsecret.bindings.g.dart'
name: 'Libsecret'
description: 'Bindings to libsecret'
headers:
  entry-points:
    - '../../../../libsecret/libsecret/secret.h'
    - '../../../../libsecret/libsecret/secret-schema.h'
    - '../../../../libsecret/libsecret/secret-password.h'
functions:
  include:
    - secret_password_storev_sync
    - secret_password_lookupv_sync
    - secret_password_clearv_sync
    - secret_password_free
structs:
  include:
    - SecretSchema
    - SecretSchemaAttribute
enums:
  include:
    - SecretSchemaAttributeType
    - SecretSchemaFlags
globals:
  include:
    - NONE
macros:
  include:
    - SECRET_COLLECTION_DEFAULT
unions:
  include:
    - NONE
unnamed-enums:
  include:
    - NONE

# TODO: enable compiler-opts, library-imports & type-map after upgrading to 
# ffigen 5.0.0 and ffi 1.2.0.
#
# These options allow the generated libsecret bindings to use types from the
# generated glib bindings.
#
# Without these options, all glib types have to be cast to Int32 before being
# provided to libsecret functions
# 
# Note: This will require dart 2.17

# compiler-opts:
# - '-I../../../../glib/glib/'
# library-imports:
#   glib: '../glib/glib.dart'
# type-map:
#   'typedefs':
#     'GHashTable':
#       'lib': 'glib'
#       'c-type': 'GHashTable'
#       'dart-type': 'GHashTable'
#     'GError':
#       'lib': 'glib'
#       'c-type': 'GError'
#       'dart-type': 'GError'
#     'gpointer':
#       'lib': 'glib'
#       'c-type': 'gpointer'
#       'dart-type': 'gpointer'
#     'gboolean':
#       'lib': 'glib'
#       'c-type': 'gboolean'
#       'dart-type': 'int'
#     'gchar':
#       'lib': 'pkg_ffi'
#       'c-type': 'Utf8'
#       'dart-type': 'Char'
#     'gint':
#       'lib': 'glib'
#       'c-type': 'gint'
#       'dart-type': 'int'
