github:
  # Runs the workflows weekly
  cron: "0 0 * * 0"

  workflows:
    lint:
      name: Dart Lint
      stages:
        - analyze_and_format
    test:
      name: Test
      stages:
        - unit_test
        - build_test
    native_test:
      name: Native Test
      stages:
        - unit_test_native
    # TODO(dnys1): Re-enable when mono_repo 6.3.0 is released
    # integration_test:
    #   name: Integration Test
    #   stages:
    #     - integration_test
    # TODO(dnys1): Re-enable when mono_repo 6.4.0 is released
    # goldens:
    #   name: Goldens
    #   stages:
    #     - golden_test

  stages:
    - name: unit_test_native
      if: ${{ github.event_name == 'push' }}

self_validate: analyze_and_format

merge_stages:
  - analyze_and_format
  - unit_test
  - unit_test_native
  # TODO(dnys1): Re-enable when mono_repo 6.4.0 is released
  # - golden_test
  # TODO(dnys1): Re-enable when mono_repo 6.3.0 is released
  # - integration_test
  - build_test
